#:import MapSource kivy_garden.mapview.MapSource
#:import asynckivy asynckivy

<TypeMapElement>
    orientation: "vertical"
    adaptive_height: True
    spacing: "8dp"

    MDIconButton:
        id: icon
        icon: root.icon
        theme_bg_color: "Custom"
        md_bg_color: "#EDF1F9" if not root.selected else app.theme_cls.primaryColor
        pos_hint: {"center_x": .5}
        theme_icon_color: "Custom"
        icon_color: "white" if root.selected else "black"
        on_release: app.set_active_element(root, root.title.lower())

    MDLabel:
        text: root.title
        pos_hint: {"center_x": .5}
        halign: "center"
        adaptive_height: True

MDScreen:

    MDNavigationLayout:

        MDScreenManager:

            MDScreen:
            
                ParksMapView:
                    map_source: MapSource(url=app.map_sources[app.current_map])
                    lat: 53.3
                    lon: 58.9
                    zoom: 10
                    on_zoom:
                        self.zoom = 10 if self.zoom < 10 else self.zoom
                    on_lat:
                        self.StartGettingParksInFov()
                    on_lon:
                        self.StartGettingParksInFov()